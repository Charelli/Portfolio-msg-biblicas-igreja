<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensagens App</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            background: #f8f9fa;
            font-family: 'Open Sans', Arial, sans-serif;
            padding: 20px;
        }

        main {
            width: 100%;
            max-width: 700px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        header h1 {
            margin: 0;
            font-size: 22px;
            color: #333;
        }

        section {
            margin-bottom: 24px;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: left;
        }

        section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #444;
        }

        input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
        }

        button {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        /* Botões principais */
        #btnSalvar {
            width: 100%;
            background: #28a745;
        }
        #btnSalvar:hover {
            background: #218838;
        }

        #btnBuscarTitulo {
            background: #007bff;
        }
        #btnBuscarTitulo:hover {
            background: #0069d9;
        }

        #btnMostrarTodas {
            background: #6c757d;
        }
        #btnMostrarTodas:hover {
            background: #5a6268;
        }

        /* Lista de mensagens */
        .msg-item {
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-bottom: 10px;
            background: #fdfdfd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .msg-info {
            font-size: 14px;
            line-height: 1.5;
        }

        .btn-excluir {
            background: #dc3545;
            padding: 6px 12px;
            border-radius: 5px;
        }
        .btn-excluir:hover {
            background: #c82333;
        }

        /* Links da referência */
        a.ref-link {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        a.ref-link:hover {
            text-decoration: underline;
        }

        /* Pop-up */
        .popup {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        .popup-content {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .popup-content p {
            margin-bottom: 15px;
            font-size: 16px;
        }
        .popup-content button {
            width: 100px;
            margin: 10px;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Botão confirmar */
        #btnConfirmar {
            background: #28a745;
            color: white;
        }
        #btnConfirmar:hover {
            background: #218838;
        }

        /* Botão cancelar */
        #btnCancelar {
            background: #dc3545;
            color: white;
        }
        #btnCancelar:hover {
            background: #c82333;
        }

    </style>
</head>
<body>
    <main>
        <header>
            <h1>📖 Cadastro e Busca de Mensagens</h1>
            <h1>Bíblicas</h1>
        </header>

        <!-- Cadastro -->
        <section id="cadastro">
            <h2>Cadastro de Mensagens</h2>
            <input type="text" id="titulo" placeholder="Título" required>
            <input type="date" id="data" required>
            <input type="text" id="pregador" placeholder="Pregador" required>
            <input type="text" id="referencia" placeholder="Referência Bíblica" required>
            <button id="btnSalvar">Salvar Mensagem</button>
        </section>

        <!-- Busca -->
        <section id="busca">
            <h2>Buscar Mensagens</h2>
            <input type="text" id="buscaTitulo" placeholder="Buscar por Título">
            <button id="btnBuscarTitulo">Buscar</button>
            <button id="btnMostrarTodas">Mostrar Todas</button>
        </section>

        <!-- Lista de mensagens -->
        <section id="listaMensagens">
            <h2>Mensagens Salvas</h2>
            <div id="mensagensContainer"></div>
        </section>

        <!-- Pop-up -->
        <div id="popup" class="popup">
            <div class="popup-content">
                <p>Você confirma o cadastro da mensagem?</p>
                <button id="btnConfirmar" onclick="confirmar()">Sim</button>
                <button id="btnCancelar" onclick="fecharPopup()">Cancelar</button>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 Mensagens App</p>
        </footer>
    </main>

    <script>
        // === Abrir pop-up ===
        document.getElementById("btnSalvar").addEventListener("click", function() {
            const titulo = document.getElementById("titulo").value.trim();
            const data = document.getElementById("data").value.trim();
            const pregador = document.getElementById("pregador").value.trim();
            const referencia = document.getElementById("referencia").value.trim();

            if (!titulo || !data || !pregador || !referencia) {
                alert("⚠️ Todos os campos são obrigatórios!");
                return;
            }
            document.getElementById("popup").style.display = "flex";
        });

        function fecharPopup() {
            document.getElementById("popup").style.display = "none";
        }

        // === Confirmar cadastro ===
        function confirmar() {
            const titulo = document.getElementById("titulo").value.trim();
            const data = document.getElementById("data").value.trim();
            const pregador = document.getElementById("pregador").value.trim();
            const referencia = document.getElementById("referencia").value.trim();

            let mensagens = JSON.parse(localStorage.getItem("mensagens")) || [];
            mensagens.push({ titulo, data, pregador, referencia });
            localStorage.setItem("mensagens", JSON.stringify(mensagens));

            alert("✅ Mensagem cadastrada com sucesso!");
            fecharPopup();
            limparCampos();
            mostrarMensagens();
        }

        function limparCampos() {
            document.getElementById("titulo").value = "";
            document.getElementById("data").value = "";
            document.getElementById("pregador").value = "";
            document.getElementById("referencia").value = "";
        }

        // === Mostrar mensagens ===
        function mostrarMensagens(filtro = "") {
            const mensagens = JSON.parse(localStorage.getItem("mensagens")) || [];
            const container = document.getElementById("mensagensContainer");
            container.innerHTML = "";

            let filtradas = mensagens;
            if (filtro) {
                filtradas = mensagens.filter(m => 
                    m.titulo.toLowerCase().includes(filtro.toLowerCase())
                );
            }

            if (filtradas.length === 0) {
                container.innerHTML = "<p>Nenhuma mensagem encontrada.</p>";
                return;
            }

            filtradas.forEach((m, index) => {
                const div = document.createElement("div");
                div.classList.add("msg-item");

                // Criar link da referência bíblica
                const referenciaLink = `https://www.bible.com/pt/bible/1608/${encodeURIComponent(m.referencia)}`;

                div.innerHTML = `
                    <div class="msg-info">
                        <strong>${m.titulo}</strong> <br>
                        📅 ${m.data} <br>
                        🙋 Pregador: ${m.pregador} <br>
                        📖 Referência: <a href="${referenciaLink}" target="_blank" class="ref-link">${m.referencia}</a>
                    </div>
                    <button class="btn-excluir" onclick="excluirMensagem(${index})">Excluir</button>
                `;
                container.appendChild(div);
            });
        }

        // === Excluir mensagem ===
        function excluirMensagem(index) {
            let mensagens = JSON.parse(localStorage.getItem("mensagens")) || [];
            mensagens.splice(index, 1);
            localStorage.setItem("mensagens", JSON.stringify(mensagens));
            mostrarMensagens();
        }

        // === Buscar por título ===
        document.getElementById("btnBuscarTitulo").addEventListener("click", function() {
            const filtro = document.getElementById("buscaTitulo").value.trim();
            mostrarMensagens(filtro);
        });

        // === Mostrar todas ===
        document.getElementById("btnMostrarTodas").addEventListener("click", function() {
            mostrarMensagens();
        });

        // Mostrar ao carregar
        mostrarMensagens();
    </script>
</body>
</html>
